<!DOCTYPE html>
<html>
<head>
    <title>Model Debug Check</title>
</head>
<body>
    <h1>Trading Card Detection Debug</h1>
    <div id="status"></div>
    <script>
        const statusDiv = document.getElementById('status');
        
        function log(message) {
            console.log(message);
            statusDiv.innerHTML += '<p>' + message + '</p>';
        }
        
        // Check if model file exists
        fetch('/models/trading_card_detector.onnx')
            .then(response => {
                if (response.ok) {
                    log('‚úÖ Model file accessible at /models/trading_card_detector.onnx');
                    return response.blob();
                } else {
                    log('‚ùå Model file not found at /models/trading_card_detector.onnx');
                    throw new Error('Model not found');
                }
            })
            .then(blob => {
                log(`üìä Model file size: ${(blob.size / 1024 / 1024).toFixed(2)} MB`);
            })
            .catch(error => {
                log('‚ùå Error accessing model: ' + error.message);
            });
        
        // Check WASM files
        const wasmFiles = [
            '/onnx/ort.wasm.min.js',
            '/onnx/ort-wasm-simd-threaded.asyncify.wasm'
        ];
        
        wasmFiles.forEach(file => {
            fetch(file)
                .then(response => {
                    if (response.ok) {
                        log('‚úÖ WASM file accessible: ' + file);
                    } else {
                        log('‚ùå WASM file not found: ' + file);
                    }
                })
                .catch(error => {
                    log('‚ùå Error accessing WASM file ' + file + ': ' + error.message);
                });
        });
        
        // Check camera API
        if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {
            log('‚úÖ Camera API available');
            
            // Test camera access
            navigator.mediaDevices.getUserMedia({ video: true })
                .then(stream => {
                    log('‚úÖ Camera access granted');
                    stream.getTracks().forEach(track => track.stop());
                })
                .catch(error => {
                    log('‚ùå Camera access denied: ' + error.message);
                });
        } else {
            log('‚ùå Camera API not available');
        }
        
        // Check HTTPS requirement
        if (location.protocol === 'https:') {
            log('‚úÖ Using HTTPS (required for camera on mobile)');
        } else {
            log('‚ö†Ô∏è Using HTTP - camera may not work on mobile devices');
        }
    </script>
</body>
</html>
